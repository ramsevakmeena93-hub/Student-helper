<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My AI Library</title>
  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ¤–</text></svg>">
  <style>
    :root{
      --bg:#0b1020; --panel:#10162b; --muted:#8892b0; --text:#e6eef8; --brand:#6ee7ff; --brand-2:#9b8cff; --ring:rgba(110,231,255,.45);
      --ok:#22c55e; --warn:#fbbf24; --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial; color:var(--text); background:radial-gradient(1200px 800px at 80% -10%, rgba(155,140,255,.15), transparent 50%), radial-gradient(900px 600px at -10% 120%, rgba(110,231,255,.12), transparent 50%), var(--bg)}
    a{color:var(--brand)}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;background:linear-gradient(180deg, rgba(11,16,32,.95), rgba(11,16,32,.6));backdrop-filter:blur(8px);z-index:20;border-bottom:1px solid rgba(255,255,255,.06)}
    .head{display:flex;gap:16px;align-items:center;padding:14px 0}
    .logo{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .logo .mark{display:grid;place-items:center;width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:0 10px 30px rgba(110,231,255,.2)}
    .logo .name{font-size:1.1rem}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.02);padding:10px 12px;border-radius:14px}
    .pill input{background:transparent;border:none;outline:none;color:var(--text);min-width:220px}
    .pill .btn{cursor:pointer;border:none;background:rgba(255,255,255,.05);padding:8px 10px;border-radius:10px;color:var(--text)}
    .bar{display:flex;flex-wrap:wrap;gap:12px;align-items:center}

    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    select, button, input[type="file"]{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);color:var(--text);padding:10px 12px;border-radius:12px}
    button{cursor:pointer}
    button.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2)); border:none; color:#04121a; font-weight:700}
    button.ghost{background:transparent;border:1px dashed rgba(255,255,255,.2)}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:18px}
    .card{grid-column:span 12;background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:18px; overflow:hidden; position:relative}
    @media(min-width:620px){.card{grid-column:span 6}}@media(min-width:900px){.card{grid-column:span 4}}
    .thumb{aspect-ratio:16/9;background:#0d1326;display:grid;place-items:center}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{padding:14px}
    .type{font-size:.7rem;letter-spacing:.14em;text-transform:uppercase;color:var(--muted)}
    .title{font-weight:800;margin:.2rem 0 .4rem}
    .desc{color:var(--muted);font-size:.95rem;line-height:1.4}
    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .tag{font-size:.75rem;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .row{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:12px}
    .row .left{display:flex;gap:8px;align-items:center}
    .fav{background:transparent;border:none;font-size:1.1rem}

    .filters{margin:12px 0;display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);cursor:pointer}
    .chip.active{outline:2px solid var(--ring)}

    .empty{padding:30px;border:1px dashed rgba(255,255,255,.2);border-radius:18px;text-align:center;color:var(--muted);margin-top:20px}

    dialog{border:none;border-radius:16px;max-width:720px;width:96%;padding:0;background:var(--panel);color:var(--text)}
    .modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .modal-body{padding:16px;display:grid;grid-template-columns:1fr;gap:10px}
    .modal-body .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .modal-body label{font-size:.85rem;color:var(--muted)}
    .modal-body input, .modal-body textarea, .modal-body select{width:100%;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12);color:var(--text);padding:10px;border-radius:10px}
    .modal-body textarea{min-height:90px;resize:vertical}
    .modal-foot{display:flex;gap:10px;justify-content:flex-end;padding:14px 16px;border-top:1px solid rgba(255,255,255,.08)}

    .toast{position:fixed;bottom:16px;right:16px;background:rgba(16,22,43,.9);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.12);padding:12px 14px;border-radius:12px;opacity:0;transform:translateY(10px);transition:.25s}
    .toast.show{opacity:1;transform:none}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap head">
      <div class="logo"><div class="mark">ðŸ¤–</div><div class="name">My AI Library</div></div>
      <div class="bar" style="margin-left:auto">
        <div class="pill">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="1.5"/><path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          <input id="q" placeholder="Search models, tools, papersâ€¦" />
          <button class="btn" id="clearSearch" title="Clear">âœ•</button>
        </div>
        <div class="controls">
          <select id="typeFilter" title="Filter by type">
            <option value="all">All Types</option>
            <option>Model</option>
            <option>Tool</option>
            <option>Dataset</option>
            <option>Paper</option>
            <option>Tutorial</option>
          </select>
          <select id="sortBy" title="Sort by">
            <option value="new">Newest</option>
            <option value="az">A â†’ Z</option>
            <option value="fav">Favourites</option>
          </select>
          <button id="exportBtn" class="ghost" title="Export JSON">Export</button>
          <label class="ghost" style="display:inline-flex;gap:8px;align-items:center;cursor:pointer">Import
            <input id="importInput" type="file" accept="application/json" style="display:none" />
          </label>
          <button id="addBtn" class="primary">+ Add Item</button>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="filters" id="tagBar"></div>
    <div class="grid" id="grid"></div>
    <div class="empty" id="empty" style="display:none">No items found. Try clearing filters or adding new items.</div>
  </main>

  <!-- Add / Edit Modal -->
  <dialog id="editor">
    <form method="dialog" id="editorForm">
      <div class="modal-head">
        <strong id="modalTitle">Add Library Item</strong>
        <button id="closeModal" class="ghost">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="grid-2">
          <div>
            <label>Title</label>
            <input id="f_title" required placeholder="e.g., Vision Transformer" />
          </div>
          <div>
            <label>Type</label>
            <select id="f_type" required>
              <option>Model</option>
              <option>Tool</option>
              <option>Dataset</option>
              <option>Paper</option>
              <option>Tutorial</option>
            </select>
          </div>
        </div>
        <div class="grid-2">
          <div>
            <label>Author / Source</label>
            <input id="f_author" placeholder="e.g., Dosovitskiy et al." />
          </div>
          <div>
            <label>Year</label>
            <input id="f_year" type="number" min="1950" max="2100" placeholder="2020" />
          </div>
        </div>
        <div>
          <label>Description</label>
          <textarea id="f_desc" placeholder="1â€“2 lines about this item"></textarea>
        </div>
        <div class="grid-2">
          <div>
            <label>Tags (comma separated)</label>
            <input id="f_tags" placeholder="vision, transformer, pytorch" />
          </div>
          <div>
            <label>Link (optional)</label>
            <input id="f_link" type="url" placeholder="https://example.com" />
          </div>
        </div>
        <div>
          <label>Image URL (optional)</label>
          <input id="f_img" type="url" placeholder="https://â€¦/cover.png" />
        </div>
      </div>
      <div class="modal-foot">
        <button type="button" class="ghost" id="deleteBtn" style="display:none">Delete</button>
        <div style="flex:1"></div>
        <button value="cancel" class="ghost">Cancel</button>
        <button class="primary" id="saveBtn" value="default">Save</button>
      </div>
    </form>
  </dialog>

  <div class="toast" id="toast"></div>

  <script>
  // --- State ---
  const grid = document.getElementById('grid');
  const q = document.getElementById('q');
  const typeFilter = document.getElementById('typeFilter');
  const sortBy = document.getElementById('sortBy');
  const tagBar = document.getElementById('tagBar');
  const empty = document.getElementById('empty');
  const editor = document.getElementById('editor');
  const editorForm = document.getElementById('editorForm');
  const toast = document.getElementById('toast');

  const f = {
    title: document.getElementById('f_title'),
    type: document.getElementById('f_type'),
    author: document.getElementById('f_author'),
    year: document.getElementById('f_year'),
    desc: document.getElementById('f_desc'),
    tags: document.getElementById('f_tags'),
    link: document.getElementById('f_link'),
    img: document.getElementById('f_img')
  };

  const LS_KEY = 'ai-library-v1';
  const sample = [
    {id: 'vit-2020', title:'Vision Transformer', type:'Model', author:'Dosovitskiy et al.', year:2020, desc:'Image classification with pure Transformers.', tags:['vision','transformer','classification'], link:'https://arxiv.org/abs/2010.11929', img:'https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1200&auto=format&fit=crop'},
    {id: 'chat-ui', title:'Chat UI Starter', type:'Tool', author:'Community', year:2024, desc:'Minimal web chat UI for LLMs.', tags:['ui','chat','starter'], link:'https://github.com', img:''},
    {id: 'coco', title:'MS COCO', type:'Dataset', author:'Lin et al.', year:2014, desc:'Large-scale object detection, segmentation, and captioning dataset.', tags:['vision','dataset','detection'], link:'https://cocodataset.org', img:'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=1200&auto=format&fit=crop'},
    {id: 'attention', title:'Attention Is All You Need', type:'Paper', author:'Vaswani et al.', year:2017, desc:'Introduced the Transformer architecture.', tags:['nlp','transformer','foundational'], link:'https://arxiv.org/abs/1706.03762', img:''},
    {id: 'pytorch-tut', title:'PyTorch Basics', type:'Tutorial', author:'Official', year:2023, desc:'Intro to tensors, autograd, and modules.', tags:['pytorch','tutorial'], link:'https://pytorch.org/tutorials/', img:''}
  ];

  let items = load();
  let currentEditId = null;
  let activeTags = new Set();

  function load(){
    const raw = localStorage.getItem(LS_KEY);
    if(!raw){ localStorage.setItem(LS_KEY, JSON.stringify(sample)); return [...sample]; }
    try{ return JSON.parse(raw); }catch{ return [...sample]; }
  }
  function save(){ localStorage.setItem(LS_KEY, JSON.stringify(items)); }

  // --- Utils ---
  const slug = s => s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
  const byNew = (a,b)=> (b.year||0)-(a.year||0);
  const byAZ = (a,b)=> a.title.localeCompare(b.title);
  const byFav = (a,b)=> (b.fav?1:0)-(a.fav?1:0) || byAZ(a,b);

  function showToast(msg){
    toast.textContent = msg; toast.classList.add('show');
    setTimeout(()=> toast.classList.remove('show'), 2200);
  }

  function allTags(){
    const t = new Set();
    items.forEach(i=> (i.tags||[]).forEach(x=> t.add(x)));
    return Array.from(t).sort();
  }

  function renderTags(){
    tagBar.innerHTML = '';
    allTags().forEach(t=>{
      const el = document.createElement('button');
      el.className = 'chip'+(activeTags.has(t)?' active':'');
      el.textContent = t; el.onclick = ()=>{ activeTags.has(t)?activeTags.delete(t):activeTags.add(t); render(); };
      tagBar.appendChild(el);
    });
    if(activeTags.size){
      const clear = document.createElement('button');
      clear.className='chip'; clear.textContent='Clear tags'; clear.onclick=()=>{activeTags.clear(); render();};
      tagBar.appendChild(clear);
    }
  }

  // --- Render ---
  function card(i){
    const el = document.createElement('article'); el.className='card';
    const hasImg = i.img && i.img.trim().length>0;
    el.innerHTML = `
      <div class="thumb">${hasImg?`<img loading="lazy" src="${i.img}" alt="${i.title}">`:'<div class="muted">No image</div>'}</div>
      <div class="meta">
        <div class="type">${escapeHTML(i.type)} â€¢ ${i.year||'â€”'}</div>
        <div class="title">${escapeHTML(i.title)}</div>
        <div class="desc">${escapeHTML(i.desc||'')}</div>
        <div class="tags">${(i.tags||[]).map(t=>`<span class="tag">${escapeHTML(t)}</span>`).join('')}</div>
        <div class="row">
          <div class="left">
            ${i.link?`<a href="${i.link}" target="_blank" rel="noopener">Open â†—</a>`:''}
            ${i.author?`<span class="muted">â€¢ ${escapeHTML(i.author)}</span>`:''}
          </div>
          <div class="right">
            <button class="fav" title="Toggle favourite">${i.fav?'â˜…':'â˜†'}</button>
            <button class="ghost" title="Edit">Edit</button>
          </div>
        </div>
      </div>`;
    // actions
    const [favBtn, editBtn] = el.querySelectorAll('.right > *');
    favBtn.onclick = ()=>{ i.fav=!i.fav; save(); render(); };
    editBtn.onclick = ()=> openEditor(i.id);
    return el;
  }

  function escapeHTML(str){
    return (str||'').toString().replace(/[&<>"']/g, s=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[s]) );
  }

  function render(){
    // filters
    const qv = q.value.trim().toLowerCase();
    const type = typeFilter.value;
    let view = items.filter(i=>{
      const matchesQ = !qv || [i.title,i.author,i.desc,(i.tags||[]).join(' ')].join(' ').toLowerCase().includes(qv);
      const matchesType = type==='all' || i.type===type;
      const matchesTags = !activeTags.size || (i.tags||[]).some(t=> activeTags.has(t));
      return matchesQ && matchesType && matchesTags;
    });

    // sort
    view.sort(sortBy.value==='az'?byAZ: sortBy.value==='fav'?byFav: byNew);

    grid.innerHTML = '';
    view.forEach(i=> grid.appendChild(card(i)));
    empty.style.display = view.length? 'none':'block';

    renderTags();
  }

  // --- Editor ---
  function openEditor(id){
    const isEdit = !!id; currentEditId = id||null;
    document.getElementById('modalTitle').textContent = isEdit? 'Edit Item':'Add Library Item';
    document.getElementById('deleteBtn').style.display = isEdit? 'inline-flex':'none';

    const obj = isEdit? items.find(x=> x.id===id) : {type:'Model'};
    f.title.value = obj.title||'';
    f.type.value = obj.type||'Model';
    f.author.value = obj.author||'';
    f.year.value = obj.year||'';
    f.desc.value = obj.desc||'';
    f.tags.value = (obj.tags||[]).join(', ');
    f.link.value = obj.link||'';
    f.img.value = obj.img||'';

    editor.showModal();
  }

  function closeEditor(){ editor.close(); }

  // Save / Delete
  document.getElementById('saveBtn').addEventListener('click', (e)=>{
    e.preventDefault();
    const obj = {
      id: currentEditId || slug(f.title.value + '-' + (f.year.value||'')),
      title: f.title.value.trim(),
      type: f.type.value,
      author: f.author.value.trim(),
      year: Number(f.year.value)||null,
      desc: f.desc.value.trim(),
      tags: f.tags.value.split(',').map(s=> s.trim()).filter(Boolean),
      link: f.link.value.trim(),
      img: f.img.value.trim()
    };
    if(!obj.title){ showToast('Title is required'); return; }

    const exists = items.findIndex(x=> x.id===obj.id);
    if(exists>-1){ items[exists] = {...items[exists], ...obj}; showToast('Item updated'); }
    else{ items.unshift(obj); showToast('Item added'); }
    save(); render(); closeEditor();
  });

  document.getElementById('deleteBtn').addEventListener('click', ()=>{
    if(!currentEditId) return; if(!confirm('Delete this item?')) return;
    items = items.filter(x=> x.id!==currentEditId); save(); render(); closeEditor(); showToast('Item deleted');
  });

  document.getElementById('closeModal').addEventListener('click', (e)=>{ e.preventDefault(); closeEditor(); });

  // Search / filters
  q.addEventListener('input', render);
  document.getElementById('clearSearch').onclick = ()=>{ q.value=''; render(); };
  typeFilter.addEventListener('change', render);
  sortBy.addEventListener('change', render);

  // Export / Import
  document.getElementById('exportBtn').onclick = ()=>{
    const blob = new Blob([JSON.stringify(items, null, 2)], {type:'application/json'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'ai-library.json'; a.click(); URL.revokeObjectURL(a.href);
    showToast('Exported ai-library.json');
  };
  document.getElementById('importInput').onchange = async (ev)=>{
    const file = ev.target.files?.[0]; if(!file) return;
    const text = await file.text();
    try{ const data = JSON.parse(text); if(!Array.isArray(data)) throw new Error('Invalid JSON');
      // Merge by id (update existing, add missing)
      const map = new Map(items.map(i=>[i.id,i]));
      data.forEach(i=>{ if(i && i.id){ map.set(i.id, {...map.get(i.id), ...i}); } });
      items = Array.from(map.values()); save(); render(); showToast('Imported ' + data.length + ' items');
    }catch(err){ alert('Import failed: '+ err.message); }
    ev.target.value = '';
  };

  // Keyboard shortcuts
  window.addEventListener('keydown', (e)=>{
    if(e.key==='/' && document.activeElement!==q){ e.preventDefault(); q.focus(); }
    if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='n'){ e.preventDefault(); openEditor(); }
  });

  // Init
  render();
  document.getElementById('addBtn').onclick = ()=> openEditor();
  </script>
</body>
</html>
